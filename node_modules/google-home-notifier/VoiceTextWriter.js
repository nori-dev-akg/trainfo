var fs = require('fs');
var VoiceText = require('voicetext');
var voice = new VoiceText('<VoiceTextのAPIキー>');
var OUT_PATH = '/home/pi/tarinfo/voice/_temp.wav'
var OUTPUT_URL = 'http://<RaspberryPIのIP>:8080/googlehome/_temp.wav';

class VoiceTextWriter {

    convertToText(text) {
        return new Promise(function (resolve, reject) {
            voice
                .speaker(voice.SPEAKER.HIKARI)
                .emotion(voice.EMOTION.HAPPINESS)
                .emotion_level(voice.EMOTION_LEVEL.HIGH)
                .volume(150)
                .speak(text, function (e, buf) {
                    if (e) {
                        console.error(e);
                        reject(e);

                    } else {
                        fs.writeFileSync(OUT_PATH, buf, 'binary');
                        resolve(OUTPUT_URL);
                    }
                });
        });
    }
}
module.exports = VoiceTextWriter;